# 文件名: config.yml 或 pages-cms.yml (取决于您的项目配置)
# Pages CMS 配置文件 - 定义内容编辑结构
# ----------------------------------------------------

# === 全局媒体配置 ===
media:
  input: src/media
  output: /media

# === 内容定义 ===
content:
  # ----------------------------------------
  # 1. 集合：文档 (docs)
  # ----------------------------------------
  - name: docs
    label: Documentation
    type: collection
    path: src/docs
    filename: "{primary}.md" # 使用 title 作为文件名的一部分
    
    # CMS 列表视图配置
    view:
      fields: [ title, order ]
      primary: title
      sort: [ order, title ]
      
    default:
      sort: order
      order: asc
      
    # 集合中的字段定义
    fields:
      - name: title
        label: Title
        type: string
        required: true # 标题是必需的
        
      - name: description
        label: Description
        type: string
        options: { maxlength: 180 }
        
      - name: order
        label: Order
        type: number
        
      - name: body
        label: Body
        type: rich-text # 主体内容

  # ----------------------------------------
  # 2. 文件：主页 (homepage)
  # ----------------------------------------
  - label: Home page
    path: src/index.njk
    name: homepage
    type: file
    
    # 文件中的字段定义
    fields:
      - name: layout
        type: string
        hidden: true
        default: layouts/base.njk
        
      # 组合字段 1: Promotion
      - name: Promotion
        label: Promotion
        type: object
        default: {} # 添加默认值以防初次创建失败
        fields:
          - name: text
            label: Text
            type: string
            
          - name: url
            label: URL
            type: string
            required: true # URL 是必需的
            
      # 组合字段 2: Features
      - name: features
        label: Features
        # 注意：这里可能更应该是 array 类型，以便添加多个 Feature
        # 但根据您的原始配置，这里继续使用 object，但提供了修正
        type: object
        default: {} # **【关键修正】** 添加空默认值
        fields:
          - name: icon
            label: Icon
            type: string
            
          - name: title
            label: Title
            type: string
            required: true # 保持必需，但初次创建时 default: {} 可以绕过
            
          - name: description
            label: Description
            type: string